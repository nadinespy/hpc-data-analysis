================================================================================
PART 1: Compare user_sec/sys_sec vs tres_usage_in_max for BATCH steps
        (where user_sec > 0, to see the relationship)
================================================================================

      job_id  nodes     user_sec    sys_sec    total_sec       tres_cpu      ratio
------------------------------------------------------------------------------------------
    29335478      1         1366          1      1368.12        1368120    1000.00
    21256089      1         1434        748      2182.94        2182944    1000.00
     7528405      1         1076          2      1079.51        1079010     999.53
    25306155      1         7160          0      7160.66        7160662    1000.00
    29216807      1          562         42       605.51         605830    1000.52
    26071699      1          119         15       135.00         134999    1000.00
    15299829      1          182          5       188.23         188236    1000.03
    23174305      1         7267        111      7378.83        7378855    1000.00
    15482313      1          939         11       951.20         951197    1000.00
    29848515      1          295         60       355.64         355647    1000.01
    20207380      1          677          7       684.75         684752    1000.00
    22346704      1         2483          0      2483.17        2483165    1000.00
    20955064      1          267          4       271.57         272328    1002.81
    28120727      1          142          3       146.02         146012     999.95
    29829359      1          501         22       523.43         523431    1000.00
     7257412      1         8655        325      8980.38        8980750    1000.04
     7358687      1         2825         10      2835.68        2835810    1000.05
    18919991      1         3581         22      3603.71        3603327     999.89
    13228966      1        42748       2648     45396.84       45397020    1000.00
    17123612      1         7205          0      7205.91        7205905    1000.00

Average ratio (tres_cpu / total_sec): 1000.14
If ratio ~1: tres_usage_in_max is in CPU-seconds
If ratio ~1000: tres_usage_in_max is in CPU-milliseconds

================================================================================
PART 2: Steps where user_sec=0 but tres_usage_in_max has CPU data
        (these are likely distributed/remote steps)
================================================================================

      job_id  nodes  id_step                 step_name   user_sec       tres_cpu
------------------------------------------------------------------------------------------
     6630109      1        0                       gmx          0            920
    26882882      5       28                     orted          0            235
    13401350      4     2916                     orted          0            190
    21736384      1       94                 gsearch13          0              7
    31144617      1    20516                nvidia-smi          0             24
    31429625      2        0                      bash          0          28630
     1778490      2        0                     orted          0            650
     8200863      1        0 task372_dim-mesh-dhcp-nvol1.conf          0            230
    31103255      1     5638                nvidia-smi          0             16
    31109445      1    31150                nvidia-smi          0             23
    27699555      2     2146                   Rscript          0            407
    17910071      1        0                     plink          0             12
    27699555      4     7444                   Rscript          0            552
    27723671      4    10550                   Rscript          0            559
    11796598      1        0 task_sub-CC00354XX08_ses-112100_group_check.conf          0            200
    16510336      4     1587                     orted          0            194
    15796369      4     1404                     orted          0            193
    26450563      1        0                  PRScs.py          0            860
    31570857      1        0                      bash          0         298328
    27699555      4     6007                   Rscript          0            589

================================================================================
PART 3: Count of steps by accounting method availability
================================================================================

 step_type     data_source           count
---------------------------------------------
   regular            both       8,814,152
   regular         neither           9,537
   regular       tres_only         338,313
   special            both      27,031,369
   special         neither         275,890
   special       tres_only       3,212,277

================================================================================
PART 4: Single-node vs multi-node job comparison
        (do single-node jobs have rusage data in regular steps?)
================================================================================

Single-node jobs (nodes=1) with regular steps:
 nodes  id_step            step_name   user_sec    sys_sec       tres_cpu
---------------------------------------------------------------------------
     1        0                 bash          1          0           2029
     1     9324 submit_GEN_103_39_1_0.sh         17          0          17990
     1    39543 submit_GEN_245_1_5_1.sh          6          0           6920
     1    32816 submit_GEN_92_16_5_0.sh          9          0           9370
     1    38348 submit_GEN_551_19_2_4.sh          8          0           8300
     1    37245 submit_GEN_203_6_1_3.sh         22          0          22510
     1    10965 submit_GEN_105_34_1_3.sh         18          0          18090
     1    14333 submit_GEN_206_5_2_1.sh          4          0           4270
     1    20265 submit_GEN_176_22_1_3.sh         20          0          20750
     1    31555 submit_GEN_90_31_2_3.sh          9          0           9941

Multi-node jobs (nodes>1) with regular steps:
 nodes  id_step            step_name   user_sec    sys_sec       tres_cpu
---------------------------------------------------------------------------
     2    10863 submit_GEN_657_28_2_5.sh          9          0           9800
     3    12016 submit_GEN_216_7_2_0.sh          3          0           4050
    12     6777 submit_GEN_487_21_1_1.sh         20          0          20402
     5    31969 submit_GEN_136_14_1_3.sh         20          0          20098
     2    16618 submit_GEN_182_12_2_4.sh         15          0          15491
     2    35310 submit_GEN_948_42_4_0.sh          4          0           4720
     2    17097 submit_GEN_66_38_5_1.sh         10          0          10270
     2    11713 submit_GEN_474_27_4_1.sh          2          0           2940
     2     1909 submit_GEN_347_15_6_1.sh          9          0           9740
     3     1672 submit_GEN_766_5_1_0.sh         31          0          31767

================================================================================
PART 5: For jobs with BOTH batch and regular steps, compare totals
        (is batch CPU a duplicate of regular steps, or additional?)
================================================================================

      job_id  nodes  elapsed   cpus     batch_ru   regular_ru  batch_tres_cpu
------------------------------------------------------------------------------------------
     1070125      3    94166     36       376651      3013095       376651980
      144173      4    47875    128      1523718      4571200      1523719630
    12874857      4     5896      4         5881        17473         5881590
     9021707      1    44577     48         4242       440715         3998530
       56572      2    86409    128      4854534      4887962      4854535650
    26539387      1    21192     12          240       230413          240715
     8227110      8     3811    256       119097       831978       119097480
    10760327      1     1358      8         5377            0         5375450
    30891536      2      227    256          919            0          919524
     2245951      2    91020    128      5812043      5813871      5812043520

================================================================================
SUMMARY
================================================================================

Key questions this script answers:
1. What is the unit of tres_usage_in_max CPU values? (ratio to user_sec+sys_sec)
2. Are regular steps missing rusage data but have tres data?
3. Is this pattern different for single-node vs multi-node jobs?
4. Is batch step CPU additional to regular steps, or a duplicate?

